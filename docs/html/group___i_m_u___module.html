<!-- HTML header for doxygen 1.9.4-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ASURT DAQ 26: IMU Group</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300&family=Roboto:wght@400&family=Roboto:wght@500&display=swap" rel="stylesheet">
</head>
<body>
<script type="module">
  // Load Mermaid first (MUST be in header)
  import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
  // DARK MODE DETECTION (critical for Doxygen)
  const isDarkMode = 
    document.documentElement.classList.contains('dark') || 
    window.matchMedia('(prefers-color-scheme: dark)').matches;
  // ENHANCED THEME CONFIGURATION (with TEXT COLOR FIX)
  mermaid.initialize({
    startOnLoad: true,
    securityLevel: 'loose',
    theme: 'base',
    themeVariables: {
      // Keep your existing colors
      primaryColor: '#f4f4ff',
      secondaryColor: 'rgba(244,244,255,0.9)',
      tertiaryColor: '#F9FAFC',
      // CRITICAL TEXT COLOR FIXES (missing in your config)
      primaryTextColor: isDarkMode ? '#e0e0e0' : '#000',
      lineColor: isDarkMode ? '#707070' : '#666',
      edgeLabelBackground: isDarkMode ? '#3a3a3a' : '#fff',
      // SEQUENCE DIAGRAM SPECIFICS
      actorBkg: isDarkMode ? '#3a3a3a' : '#e6f2ff',
      actorBorder: isDarkMode ? '#888' : '#216fda',
      noteBkg: isDarkMode ? '#4a4a4a' : '#eef4ff',
      noteBorderColor: isDarkMode ? '#707070' : '#216fda'
    }
  });
  console.log(`Mermaid initialized for ${isDarkMode ? 'DARK' : 'LIGHT'} mode`);
</script>
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ASURT DAQ 26
   </div>
   <div id="projectbrief">Ain Shams University&#39;s Racing Team&#39;s Data Acquisition System 2026</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('group___i_m_u___module.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">IMU Group </div></div>
</div><!--header-->
<div class="contents">

<p>Driver implementation for Adafruit BNO055 9-DoF Absolute Orientation Sensor.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-nested-classes" class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:imu_5Faxis_5Fmap_5Ft" id="r_imu_5Faxis_5Fmap_5Ft"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structimu__axis__map__t.html">imu_axis_map_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Complete axis mapping configuration.  <a href="structimu__axis__map__t.html#details">More...</a><br /></td></tr>
<tr class="memitem:imu_5Fvector_5Ft" id="r_imu_5Fvector_5Ft"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structimu__vector__t.html">imu_vector_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">3D vector representation for sensor data  <a href="structimu__vector__t.html#details">More...</a><br /></td></tr>
<tr class="memitem:imu_5Freading_5Fbuffer_5Ft" id="r_imu_5Freading_5Fbuffer_5Ft"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structimu__reading__buffer__t.html">imu_reading_buffer_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Buffer for tracking previous and current sensor readings.  <a href="structimu__reading__buffer__t.html#details">More...</a><br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-define-members" class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga94daec5b120dc0aa53a4b2d2015ade7c" id="r_ga94daec5b120dc0aa53a4b2d2015ade7c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga94daec5b120dc0aa53a4b2d2015ade7c">IMU_I2C_ADDRESS</a>&#160;&#160;&#160;DAQ_IMU_I2C_ADDRESS</td></tr>
<tr class="memdesc:ga94daec5b120dc0aa53a4b2d2015ade7c"><td class="mdescLeft">&#160;</td><td class="mdescRight">I2C address of the IMU sensor (typically 0x28 or 0x29)  <br /></td></tr>
<tr class="memitem:ga4dbf7ce504cd560dfba86f65cc82b37d" id="r_ga4dbf7ce504cd560dfba86f65cc82b37d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga4dbf7ce504cd560dfba86f65cc82b37d">IMU_ID</a>&#160;&#160;&#160;(0xA0)</td></tr>
<tr class="memdesc:ga4dbf7ce504cd560dfba86f65cc82b37d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Expected chip ID for BNO055 sensor (0xA0)  <br /></td></tr>
<tr class="memitem:gafc531479bfc94823ef5f21504c4a659c" id="r_gafc531479bfc94823ef5f21504c4a659c"><td class="memItemLeft" align="right" valign="top"><a id="gafc531479bfc94823ef5f21504c4a659c" name="gafc531479bfc94823ef5f21504c4a659c"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>IMU_RST_GPIO_PORT</b>&#160;&#160;&#160;DAQ_IMU_RST_GPIO_PORT</td></tr>
<tr class="memitem:gabe68668588d252c4b1144c1166f4a969" id="r_gabe68668588d252c4b1144c1166f4a969"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gabe68668588d252c4b1144c1166f4a969">IMU_RST_PIN</a>&#160;&#160;&#160;DAQ_IMU_RST_PIN</td></tr>
<tr class="memdesc:gabe68668588d252c4b1144c1166f4a969"><td class="mdescLeft">&#160;</td><td class="mdescRight">Hardware reset pin configuration for the IMU.  <br /></td></tr>
<tr class="memitem:ga037985e51d4a6691ae8fa61f8570b079" id="r_ga037985e51d4a6691ae8fa61f8570b079"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga037985e51d4a6691ae8fa61f8570b079">IMU_EULER_ANGLE_OFFSET_X</a>&#160;&#160;&#160;0.0</td></tr>
<tr class="memdesc:ga037985e51d4a6691ae8fa61f8570b079"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mounting offset corrections for x axis Euler angles.  <br /></td></tr>
<tr class="memitem:ga056ff2673a18903c2f385a55dc92ff51" id="r_ga056ff2673a18903c2f385a55dc92ff51"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga056ff2673a18903c2f385a55dc92ff51">IMU_EULER_ANGLE_OFFSET_Y</a>&#160;&#160;&#160;0.0</td></tr>
<tr class="memdesc:ga056ff2673a18903c2f385a55dc92ff51"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mounting offset corrections for y-axis Euler angles.  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-enum-members" class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga5913adfbcad0f6bc6e194680ece72f6c" id="r_ga5913adfbcad0f6bc6e194680ece72f6c"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga5913adfbcad0f6bc6e194680ece72f6c">imu_powermode_t</a> { <a class="el" href="#gga5913adfbcad0f6bc6e194680ece72f6ca3bb4ece3a81e5d85eba87a387dbe8b26">POWER_MODE_NORMAL</a> = 0X00
, <a class="el" href="#gga5913adfbcad0f6bc6e194680ece72f6cad346e12cb318b3c2ca66c563b2b22aef">POWER_MODE_LOWPOWER</a> = 0X01
, <a class="el" href="#gga5913adfbcad0f6bc6e194680ece72f6cac2882be2d7bef7faa64770bc172dcd0c">POWER_MODE_SUSPEND</a> = 0X02
 }</td></tr>
<tr class="memdesc:ga5913adfbcad0f6bc6e194680ece72f6c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Power modes for the BNO055 sensor.  <a href="#ga5913adfbcad0f6bc6e194680ece72f6c">More...</a><br /></td></tr>
<tr class="memitem:ga401ddda4c6ec7a2b0d21e257d52ec49f" id="r_ga401ddda4c6ec7a2b0d21e257d52ec49f"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga401ddda4c6ec7a2b0d21e257d52ec49f">imu_opmode_t</a> { <br />
&#160;&#160;<a class="el" href="#gga401ddda4c6ec7a2b0d21e257d52ec49faa31c8eb1dcc62e7dc3e6499eaf8944b8">OPERATION_MODE_CONFIG</a> = 0X00
, <a class="el" href="#gga401ddda4c6ec7a2b0d21e257d52ec49fa53a4602c31de70810f22b5e4eba4f072">OPERATION_MODE_ACCONLY</a> = 0X01
, <a class="el" href="#gga401ddda4c6ec7a2b0d21e257d52ec49fa36d673166e0c9d451c9d715a56668260">OPERATION_MODE_MAGONLY</a> = 0X02
, <a class="el" href="#gga401ddda4c6ec7a2b0d21e257d52ec49fa395bb3b2689101581ca369ac2eaebb41">OPERATION_MODE_GYRONLY</a> = 0X03
, <br />
&#160;&#160;<a class="el" href="#gga401ddda4c6ec7a2b0d21e257d52ec49fa2b2be0aa89dc17e0403db5fc02f64ca3">OPERATION_MODE_ACCMAG</a> = 0X04
, <a class="el" href="#gga401ddda4c6ec7a2b0d21e257d52ec49fa5ea69ff995bc9161fb7a7b2fc6c746c8">OPERATION_MODE_ACCGYRO</a> = 0X05
, <a class="el" href="#gga401ddda4c6ec7a2b0d21e257d52ec49fa4012fbf9aae4670c00e6a6314d9ce474">OPERATION_MODE_MAGGYRO</a> = 0X06
, <a class="el" href="#gga401ddda4c6ec7a2b0d21e257d52ec49fa93920e184bae7532db922c6713ffda4e">OPERATION_MODE_AMG</a> = 0X07
, <br />
&#160;&#160;<a class="el" href="#gga401ddda4c6ec7a2b0d21e257d52ec49fabc588dfc0c9cf6c7939618d10b3891e7">OPERATION_MODE_IMUPLUS</a> = 0X08
, <a class="el" href="#gga401ddda4c6ec7a2b0d21e257d52ec49fad4441b53cd291468803579ae85334e2e">OPERATION_MODE_COMPASS</a> = 0X09
, <a class="el" href="#gga401ddda4c6ec7a2b0d21e257d52ec49fa5a15b75b6a35eff39a0163042901bccb">OPERATION_MODE_M4G</a> = 0X0A
, <a class="el" href="#gga401ddda4c6ec7a2b0d21e257d52ec49fa01202040d4fe809e7764b80abd1e41e1">OPERATION_MODE_NDOF_FMC_OFF</a> = 0X0B
, <br />
&#160;&#160;<a class="el" href="#gga401ddda4c6ec7a2b0d21e257d52ec49fa7aff545bcd830cb1c07c238464cc205d">OPERATION_MODE_NDOF</a> = 0X0C
<br />
 }</td></tr>
<tr class="memdesc:ga401ddda4c6ec7a2b0d21e257d52ec49f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Operational modes for sensor fusion and data processing.  <a href="#ga401ddda4c6ec7a2b0d21e257d52ec49f">More...</a><br /></td></tr>
<tr class="memitem:gac23b9d3a623ab1d78f787fd7c0a27d77" id="r_gac23b9d3a623ab1d78f787fd7c0a27d77"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gac23b9d3a623ab1d78f787fd7c0a27d77">imu_vector_type_t</a> { <br />
&#160;&#160;<a class="el" href="#ggac23b9d3a623ab1d78f787fd7c0a27d77acc3b3076ab1a04df975cf7d24dd3c0bd">VECTOR_ACCELEROMETER</a> = 0x08
, <a class="el" href="#ggac23b9d3a623ab1d78f787fd7c0a27d77a60a6e0242db30c34de57e837c2c32974">VECTOR_MAGNETOMETER</a> = 0x0E
, <a class="el" href="#ggac23b9d3a623ab1d78f787fd7c0a27d77aac75f41ecda4ac504e2110b6faa2f447">VECTOR_GYROSCOPE</a> = 0x14
, <a class="el" href="#ggac23b9d3a623ab1d78f787fd7c0a27d77a424cd2e7452cbed7576aa32b6eb449bc">VECTOR_EULER</a> = 0x1A
, <br />
&#160;&#160;<a class="el" href="#ggac23b9d3a623ab1d78f787fd7c0a27d77a7c1b53745eb8705d4073684a5053baf0">VECTOR_LINEARACCEL</a> = 0X28
, <a class="el" href="#ggac23b9d3a623ab1d78f787fd7c0a27d77a70807bf085cec93ea6e563c5a3dd6185">VECTOR_GRAVITY</a> = 0X2E
<br />
 }</td></tr>
<tr class="memdesc:gac23b9d3a623ab1d78f787fd7c0a27d77"><td class="mdescLeft">&#160;</td><td class="mdescRight">Types of sensor data vectors that can be read.  <a href="#gac23b9d3a623ab1d78f787fd7c0a27d77">More...</a><br /></td></tr>
<tr class="memitem:ga35b2004261ded8898620d091f0fbcf5f" id="r_ga35b2004261ded8898620d091f0fbcf5f"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga35b2004261ded8898620d091f0fbcf5f">imu_axis_map_sign_t</a> { <a class="el" href="#gga35b2004261ded8898620d091f0fbcf5faa72a2f80bf7ff71f7fb87c0c69200b32">BNO055_AXIS_SIGN_POSITIVE</a> = 0x00
, <a class="el" href="#gga35b2004261ded8898620d091f0fbcf5fa48feb03d03f3a4d9a6efc354479cdaf8">BNO055_AXIS_SIGN_NEGATIVE</a> = 0x01
 }</td></tr>
<tr class="memdesc:ga35b2004261ded8898620d091f0fbcf5f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Axis sign options for mapping.  <a href="#ga35b2004261ded8898620d091f0fbcf5f">More...</a><br /></td></tr>
<tr class="memitem:gac5c3bf82c593da63f832cf70a2ed97ef" id="r_gac5c3bf82c593da63f832cf70a2ed97ef"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gac5c3bf82c593da63f832cf70a2ed97ef">imu_axis_map_representation_t</a> { <a class="el" href="#ggac5c3bf82c593da63f832cf70a2ed97efa4f7a476a26ca32a058dedc14b23ca339">BNO055_AXIS_X</a> = 0x00
, <a class="el" href="#ggac5c3bf82c593da63f832cf70a2ed97efa91d05fd0e3f1d9fb10b2d5ff1ce9dadf">BNO055_AXIS_Y</a> = 0x01
, <a class="el" href="#ggac5c3bf82c593da63f832cf70a2ed97efa7a6a36d984dada2c58dd5c12ea080e2f">BNO055_AXIS_Z</a> = 0x02
 }</td></tr>
<tr class="memdesc:gac5c3bf82c593da63f832cf70a2ed97ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Physical axis identifiers for mapping.  <a href="#gac5c3bf82c593da63f832cf70a2ed97ef">More...</a><br /></td></tr>
<tr class="memitem:ga968b1543a380c2bdad4a8b4e228b0ac7" id="r_ga968b1543a380c2bdad4a8b4e228b0ac7"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga968b1543a380c2bdad4a8b4e228b0ac7">imu_max_acceleration_t</a> { <a class="el" href="#gga968b1543a380c2bdad4a8b4e228b0ac7a8b758981020919e41d27ff4a614dae01">BNO055_MAX_ACCELERATION_2G</a> = 0x00
, <a class="el" href="#gga968b1543a380c2bdad4a8b4e228b0ac7a72f450ff424255bc0580a5f0597b2329">BNO055_MAX_ACCELERATION_4G</a>
, <a class="el" href="#gga968b1543a380c2bdad4a8b4e228b0ac7a708fd6df476888842f9bc58430a9802b">BNO055_MAX_ACCELERATION_8G</a>
, <a class="el" href="#gga968b1543a380c2bdad4a8b4e228b0ac7a44b4a62b72bbfb25c104d3dc6b1c7082">BNO055_MAX_ACCELERATION_16G</a>
 }</td></tr>
<tr class="memdesc:ga968b1543a380c2bdad4a8b4e228b0ac7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum acceleration range settings.  <a href="#ga968b1543a380c2bdad4a8b4e228b0ac7">More...</a><br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaed262c2be35b7096c228cdf1cec7240f" id="r_gaed262c2be35b7096c228cdf1cec7240f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaed262c2be35b7096c228cdf1cec7240f">IMU_Init</a> (I2C_HandleTypeDef *hi2c, <a class="el" href="#ga401ddda4c6ec7a2b0d21e257d52ec49f">imu_opmode_t</a> mode, <a class="el" href="structimu__axis__map__t.html">imu_axis_map_t</a> map)</td></tr>
<tr class="memdesc:gaed262c2be35b7096c228cdf1cec7240f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the IMU sensor with specified configuration.  <br /></td></tr>
<tr class="memitem:gae31756275a63934a8b239f19c9ffae4a" id="r_gae31756275a63934a8b239f19c9ffae4a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gae31756275a63934a8b239f19c9ffae4a">IMU_Task</a> (void *pvParameters)</td></tr>
<tr class="memdesc:gae31756275a63934a8b239f19c9ffae4a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main task for IMU data processing and transmission.  <br /></td></tr>
<tr class="memitem:ga4f8a4ea1671cd748f22e8df02e9a9a39" id="r_ga4f8a4ea1671cd748f22e8df02e9a9a39"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga4f8a4ea1671cd748f22e8df02e9a9a39">IMU_SetMode</a> (<a class="el" href="#ga401ddda4c6ec7a2b0d21e257d52ec49f">imu_opmode_t</a> mode)</td></tr>
<tr class="memdesc:ga4f8a4ea1671cd748f22e8df02e9a9a39"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change the IMU's operation mode.  <br /></td></tr>
<tr class="memitem:ga48cf47ac01e614d873d34d0f2845d590" id="r_ga48cf47ac01e614d873d34d0f2845d590"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga48cf47ac01e614d873d34d0f2845d590">IMU_GetVector</a> (<a class="el" href="#gac23b9d3a623ab1d78f787fd7c0a27d77">imu_vector_type_t</a> vector_type, float *xyz)</td></tr>
<tr class="memdesc:ga48cf47ac01e614d873d34d0f2845d590"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a specific vector type from the IMU.  <br /></td></tr>
<tr class="memitem:gaad391dee2d813713a54b53f9564fcc35" id="r_gaad391dee2d813713a54b53f9564fcc35"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaad391dee2d813713a54b53f9564fcc35">IMU_WriteData</a> (uint8_t reg, uint8_t data)</td></tr>
<tr class="memdesc:gaad391dee2d813713a54b53f9564fcc35"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a single byte to an IMU register.  <br /></td></tr>
<tr class="memitem:ga28f8d16c01d53b0521fcfd6c5138bedd" id="r_ga28f8d16c01d53b0521fcfd6c5138bedd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga28f8d16c01d53b0521fcfd6c5138bedd">IMU_SetAxisMap</a> (<a class="el" href="structimu__axis__map__t.html">imu_axis_map_t</a> axis)</td></tr>
<tr class="memdesc:ga28f8d16c01d53b0521fcfd6c5138bedd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure the axis mapping.  <br /></td></tr>
<tr class="memitem:ga76c1a55d6cc2203613cd082d2edf540a" id="r_ga76c1a55d6cc2203613cd082d2edf540a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga76c1a55d6cc2203613cd082d2edf540a">IMU_SelectRegPage</a> (uint8_t page)</td></tr>
<tr class="memdesc:ga76c1a55d6cc2203613cd082d2edf540a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Select register page (0 or 1)  <br /></td></tr>
<tr class="memitem:ga358e7a3778991d16b3b33dfe923cbffe" id="r_ga358e7a3778991d16b3b33dfe923cbffe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga358e7a3778991d16b3b33dfe923cbffe">IMU_Eulers_Apply_Offset</a> (<a class="el" href="structimu__vector__t.html">imu_vector_t</a> *angles)</td></tr>
<tr class="memdesc:ga358e7a3778991d16b3b33dfe923cbffe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Apply mounting offset corrections to Euler angles.  <br /></td></tr>
<tr class="memitem:ga227f9cb3012bb87083480348fe0f2b12" id="r_ga227f9cb3012bb87083480348fe0f2b12"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga227f9cb3012bb87083480348fe0f2b12">IMU_Transform_Accels</a> (<a class="el" href="structimu__vector__t.html">imu_vector_t</a> *accels)</td></tr>
<tr class="memdesc:ga227f9cb3012bb87083480348fe0f2b12"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transform acceleration vectors based on mounting orientation.  <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<p>Driver implementation for Adafruit BNO055 9-DoF Absolute Orientation Sensor. </p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md15"></a>
Overview</h2>
<p>This module provides an interface for configuring and reading Tait-Bryan angles and linear acclererations from the BNO055 Adafruit IMU sensor. The driver supports various operation modes, axis remapping, and data transformation to accommodate different vehicle mounting orientations.</p>
<dl class="section note"><dt>Note</dt><dd>This driver includes only the functionality required for the current application. For additional features, refer to the BNO055 datasheet for implementation details.</dd></dl>
<h2 class="doxsection"><a class="anchor" id="autotoc_md16"></a>
Initialization flow</h2>
<ol type="1">
<li><b>Hardware reset &amp; sensor reboot:</b> The reset procedure requires a delay (datasheet ≈ 650 ms). The driver waits by looping short delays and refreshing the window watchdog (WWDG) so the watchdog does not reset the MCU during this long delay. <dl class="section attention"><dt>Attention</dt><dd>The NIVC priority of the timebase timer (should be different than systick because RTOS uses it) must be set to a higher priority (lower in value) than the <span class="tt">configLIBRARY_MAX_SYSCALL_INTERRUPT_PRIORITY</span>. It took me 10 hours to debug, and it ruined a whole testing day (Arrived home at 2 AM)</dd></dl>
</li>
<li><b>Device presence check:</b> After reset, the driver reads the CHIP ID register and verifies it matches the expected IMU ID. If the read fails or ID is incorrect the init aborts.</li>
<li><b>Power mode &amp; page selection:</b> The driver sets the IMU power mode to normal</li>
<li><b>Acceleration configuration:</b> Acceleration range is set to 16g. <dl class="section attention"><dt>Attention</dt><dd>The register page must be switched to 1 to change the acceleration range. Don't forget to set it back to 0 if needed (you abslotely will).</dd></dl>
</li>
<li><b>Axis remapping:</b> Axis remapping and sign settings are written to the axis map registers to align IMU axes with the vehicle coordinate frame.</li>
<li><b>Operational mode:</b> The NDOF operating mode is set. The reason why it was used is that it fuses data from the accelerometer, gyroscope, and magnetometer to give absolute orientation output. All calculations take place inside the BNO055 chip itself not the DAQ MCU, killing computational intensity.</li>
</ol>
<h2 class="doxsection"><a class="anchor" id="autotoc_md17"></a>
Calibration and Offsets</h2>
<p>It’s nearly impossible to mount the sensor with perfectly zeroed pitch (about the y-axis) and roll (about the x-axis). Even attempting to make these angles close enough to 0 to be negligible can be exhausting. As a result, an offset will be subtracted from the measured angles, and the linear acceleration readings will be corrected through a linear transformation to properly align the axes. The angles' offset is obvious: pure subtraction. Therefore, I'll discuss the linear transformation.</p>
<h3 class="doxsection"><a class="anchor" id="autotoc_md18"></a>
Mapping Ground to Body</h3>
<p>The normal transformation from the ground frame (name it <picture><source srcset="form_21_dark.png" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$\vec{G}$" src="form_21.png" width="10" height="13"/></picture>) of reference to the body frame ( <picture><source srcset="form_22_dark.png" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$\vec{B}$" src="form_22.png" width="10" height="13"/></picture>) applies intrinsic rotations in the order:</p><ul>
<li>Yaw <picture><source srcset="form_18_dark.png" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$R_z(\psi)$" src="form_18.png" width="33" height="14"/></picture></li>
<li>Pitch <picture><source srcset="form_19_dark.png" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$R_y(\theta)$" src="form_19.png" width="30" height="14"/></picture></li>
<li>Roll <picture><source srcset="form_20_dark.png" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$R_x(\phi)$" src="form_20.png" width="31" height="14"/></picture></li>
</ul>
<p>Therefore, the transformation could be written as follows   </p><p class="formulaDsp">
<picture><source srcset="form_23_dark.png" media="(prefers-color-scheme: dark)"/><img class="formulaDsp" alt="\[  \vec{B} = R_x(\phi)R_y(\theta)R_z(\psi)\vec{G}
\]" src="form_23.png" width="135" height="16"/></picture>
</p>
<p> This is the effect we want to reverse. In other words, we need to define a mapping from the body frame to the ground frame. To do so, we can simply</p><ul>
<li>Reverse the order of the applied rotations (start with roll).</li>
<li>Flip the angle's sign (to inverse the rotation).</li>
</ul>
<p>The original mapping looks like this.  
  <div style="text-align: center;">
    <img src="oldTr.png" alt="3-2-1 Rotation Linear transformation from frame to body" style="max-width:90%; height:auto;">
  </div>
 We will reverse, flip signs, and remove the R_z matrix because no yaw correction is needed. Hence, we get  
  <div style="text-align: center;">
    <img src="newTr.png" alt="3-2-1 Rotation Linear transformation from body to frame" style="max-width:70%; height:auto;">
  </div>
 and that's exactly the offset correction linear transformation used in the code.</p>
<a name="doc-define-members" id="doc-define-members"></a><h2 id="header-doc-define-members" class="groupheader">Macro Definition Documentation</h2>
<a id="ga037985e51d4a6691ae8fa61f8570b079" name="ga037985e51d4a6691ae8fa61f8570b079"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga037985e51d4a6691ae8fa61f8570b079">&#9670;&#160;</a></span>IMU_EULER_ANGLE_OFFSET_X</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IMU_EULER_ANGLE_OFFSET_X&#160;&#160;&#160;0.0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Mounting offset corrections for x axis Euler angles. </p>
<p>It compensate for imperfect sensor mounting alignment. Determined experimentally after physical installation. </p>

</div>
</div>
<a id="ga056ff2673a18903c2f385a55dc92ff51" name="ga056ff2673a18903c2f385a55dc92ff51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga056ff2673a18903c2f385a55dc92ff51">&#9670;&#160;</a></span>IMU_EULER_ANGLE_OFFSET_Y</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IMU_EULER_ANGLE_OFFSET_Y&#160;&#160;&#160;0.0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Mounting offset corrections for y-axis Euler angles. </p>
<p>It compensate for imperfect sensor mounting alignment. Determined experimentally after physical installation. </p>

</div>
</div>
<a id="ga94daec5b120dc0aa53a4b2d2015ade7c" name="ga94daec5b120dc0aa53a4b2d2015ade7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga94daec5b120dc0aa53a4b2d2015ade7c">&#9670;&#160;</a></span>IMU_I2C_ADDRESS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IMU_I2C_ADDRESS&#160;&#160;&#160;DAQ_IMU_I2C_ADDRESS</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>I2C address of the IMU sensor (typically 0x28 or 0x29) </p>
<p>Configured through DAQ_IMU_I2C_ADDRESS in system configuration. </p>

</div>
</div>
<a id="ga4dbf7ce504cd560dfba86f65cc82b37d" name="ga4dbf7ce504cd560dfba86f65cc82b37d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4dbf7ce504cd560dfba86f65cc82b37d">&#9670;&#160;</a></span>IMU_ID</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IMU_ID&#160;&#160;&#160;(0xA0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Expected chip ID for BNO055 sensor (0xA0) </p>
<p>Used during initialization to verify proper communication with the sensor. </p>

</div>
</div>
<a id="gabe68668588d252c4b1144c1166f4a969" name="gabe68668588d252c4b1144c1166f4a969"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabe68668588d252c4b1144c1166f4a969">&#9670;&#160;</a></span>IMU_RST_PIN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IMU_RST_PIN&#160;&#160;&#160;DAQ_IMU_RST_PIN</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Hardware reset pin configuration for the IMU. </p>
<p>Allows software-controlled reset of the IMU sensor when needed. </p>

</div>
</div>
<a name="doc-enum-members" id="doc-enum-members"></a><h2 id="header-doc-enum-members" class="groupheader">Enumeration Type Documentation</h2>
<a id="gac5c3bf82c593da63f832cf70a2ed97ef" name="gac5c3bf82c593da63f832cf70a2ed97ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac5c3bf82c593da63f832cf70a2ed97ef">&#9670;&#160;</a></span>imu_axis_map_representation_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="#gac5c3bf82c593da63f832cf70a2ed97ef">imu_axis_map_representation_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Physical axis identifiers for mapping. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ggac5c3bf82c593da63f832cf70a2ed97efa4f7a476a26ca32a058dedc14b23ca339" name="ggac5c3bf82c593da63f832cf70a2ed97efa4f7a476a26ca32a058dedc14b23ca339"></a>BNO055_AXIS_X&#160;</td><td class="fielddoc"><p>X axis. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggac5c3bf82c593da63f832cf70a2ed97efa91d05fd0e3f1d9fb10b2d5ff1ce9dadf" name="ggac5c3bf82c593da63f832cf70a2ed97efa91d05fd0e3f1d9fb10b2d5ff1ce9dadf"></a>BNO055_AXIS_Y&#160;</td><td class="fielddoc"><p>Y axis. </p>
</td></tr>
<tr><td class="fieldname"><a id="ggac5c3bf82c593da63f832cf70a2ed97efa7a6a36d984dada2c58dd5c12ea080e2f" name="ggac5c3bf82c593da63f832cf70a2ed97efa7a6a36d984dada2c58dd5c12ea080e2f"></a>BNO055_AXIS_Z&#160;</td><td class="fielddoc"><p>Z axis. </p>
</td></tr>
</table>

</div>
</div>
<a id="ga35b2004261ded8898620d091f0fbcf5f" name="ga35b2004261ded8898620d091f0fbcf5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga35b2004261ded8898620d091f0fbcf5f">&#9670;&#160;</a></span>imu_axis_map_sign_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="#ga35b2004261ded8898620d091f0fbcf5f">imu_axis_map_sign_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Axis sign options for mapping. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga35b2004261ded8898620d091f0fbcf5faa72a2f80bf7ff71f7fb87c0c69200b32" name="gga35b2004261ded8898620d091f0fbcf5faa72a2f80bf7ff71f7fb87c0c69200b32"></a>BNO055_AXIS_SIGN_POSITIVE&#160;</td><td class="fielddoc"><p>Positive direction. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga35b2004261ded8898620d091f0fbcf5fa48feb03d03f3a4d9a6efc354479cdaf8" name="gga35b2004261ded8898620d091f0fbcf5fa48feb03d03f3a4d9a6efc354479cdaf8"></a>BNO055_AXIS_SIGN_NEGATIVE&#160;</td><td class="fielddoc"><p>Negative direction. </p>
</td></tr>
</table>

</div>
</div>
<a id="ga968b1543a380c2bdad4a8b4e228b0ac7" name="ga968b1543a380c2bdad4a8b4e228b0ac7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga968b1543a380c2bdad4a8b4e228b0ac7">&#9670;&#160;</a></span>imu_max_acceleration_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="#ga968b1543a380c2bdad4a8b4e228b0ac7">imu_max_acceleration_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum acceleration range settings. </p>
<p>Configures the accelerometer's measurement range. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga968b1543a380c2bdad4a8b4e228b0ac7a8b758981020919e41d27ff4a614dae01" name="gga968b1543a380c2bdad4a8b4e228b0ac7a8b758981020919e41d27ff4a614dae01"></a>BNO055_MAX_ACCELERATION_2G&#160;</td><td class="fielddoc"><p>±2g range </p>
</td></tr>
<tr><td class="fieldname"><a id="gga968b1543a380c2bdad4a8b4e228b0ac7a72f450ff424255bc0580a5f0597b2329" name="gga968b1543a380c2bdad4a8b4e228b0ac7a72f450ff424255bc0580a5f0597b2329"></a>BNO055_MAX_ACCELERATION_4G&#160;</td><td class="fielddoc"><p>±4g range </p>
</td></tr>
<tr><td class="fieldname"><a id="gga968b1543a380c2bdad4a8b4e228b0ac7a708fd6df476888842f9bc58430a9802b" name="gga968b1543a380c2bdad4a8b4e228b0ac7a708fd6df476888842f9bc58430a9802b"></a>BNO055_MAX_ACCELERATION_8G&#160;</td><td class="fielddoc"><p>±8g range </p>
</td></tr>
<tr><td class="fieldname"><a id="gga968b1543a380c2bdad4a8b4e228b0ac7a44b4a62b72bbfb25c104d3dc6b1c7082" name="gga968b1543a380c2bdad4a8b4e228b0ac7a44b4a62b72bbfb25c104d3dc6b1c7082"></a>BNO055_MAX_ACCELERATION_16G&#160;</td><td class="fielddoc"><p>±16g range </p>
</td></tr>
</table>

</div>
</div>
<a id="ga401ddda4c6ec7a2b0d21e257d52ec49f" name="ga401ddda4c6ec7a2b0d21e257d52ec49f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga401ddda4c6ec7a2b0d21e257d52ec49f">&#9670;&#160;</a></span>imu_opmode_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="#ga401ddda4c6ec7a2b0d21e257d52ec49f">imu_opmode_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Operational modes for sensor fusion and data processing. </p>
<p>The BNO055 offers multiple modes that determine which sensors are active and how data is processed/fused. NDOF (Nine Degrees of Freedom) mode provides the most complete orientation data. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga401ddda4c6ec7a2b0d21e257d52ec49faa31c8eb1dcc62e7dc3e6499eaf8944b8" name="gga401ddda4c6ec7a2b0d21e257d52ec49faa31c8eb1dcc62e7dc3e6499eaf8944b8"></a>OPERATION_MODE_CONFIG&#160;</td><td class="fielddoc"><p>Configuration mode (change settings) </p>
</td></tr>
<tr><td class="fieldname"><a id="gga401ddda4c6ec7a2b0d21e257d52ec49fa53a4602c31de70810f22b5e4eba4f072" name="gga401ddda4c6ec7a2b0d21e257d52ec49fa53a4602c31de70810f22b5e4eba4f072"></a>OPERATION_MODE_ACCONLY&#160;</td><td class="fielddoc"><p>Accelerometer only. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga401ddda4c6ec7a2b0d21e257d52ec49fa36d673166e0c9d451c9d715a56668260" name="gga401ddda4c6ec7a2b0d21e257d52ec49fa36d673166e0c9d451c9d715a56668260"></a>OPERATION_MODE_MAGONLY&#160;</td><td class="fielddoc"><p>Magnetometer only. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga401ddda4c6ec7a2b0d21e257d52ec49fa395bb3b2689101581ca369ac2eaebb41" name="gga401ddda4c6ec7a2b0d21e257d52ec49fa395bb3b2689101581ca369ac2eaebb41"></a>OPERATION_MODE_GYRONLY&#160;</td><td class="fielddoc"><p>Gyroscope only. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga401ddda4c6ec7a2b0d21e257d52ec49fa2b2be0aa89dc17e0403db5fc02f64ca3" name="gga401ddda4c6ec7a2b0d21e257d52ec49fa2b2be0aa89dc17e0403db5fc02f64ca3"></a>OPERATION_MODE_ACCMAG&#160;</td><td class="fielddoc"><p>Accelerometer + Magnetometer. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga401ddda4c6ec7a2b0d21e257d52ec49fa5ea69ff995bc9161fb7a7b2fc6c746c8" name="gga401ddda4c6ec7a2b0d21e257d52ec49fa5ea69ff995bc9161fb7a7b2fc6c746c8"></a>OPERATION_MODE_ACCGYRO&#160;</td><td class="fielddoc"><p>Accelerometer + Gyroscope. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga401ddda4c6ec7a2b0d21e257d52ec49fa4012fbf9aae4670c00e6a6314d9ce474" name="gga401ddda4c6ec7a2b0d21e257d52ec49fa4012fbf9aae4670c00e6a6314d9ce474"></a>OPERATION_MODE_MAGGYRO&#160;</td><td class="fielddoc"><p>Magnetometer + Gyroscope. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga401ddda4c6ec7a2b0d21e257d52ec49fa93920e184bae7532db922c6713ffda4e" name="gga401ddda4c6ec7a2b0d21e257d52ec49fa93920e184bae7532db922c6713ffda4e"></a>OPERATION_MODE_AMG&#160;</td><td class="fielddoc"><p>Accelerometer + Magnetometer + Gyroscope (no fusion) </p>
</td></tr>
<tr><td class="fieldname"><a id="gga401ddda4c6ec7a2b0d21e257d52ec49fabc588dfc0c9cf6c7939618d10b3891e7" name="gga401ddda4c6ec7a2b0d21e257d52ec49fabc588dfc0c9cf6c7939618d10b3891e7"></a>OPERATION_MODE_IMUPLUS&#160;</td><td class="fielddoc"><p>IMU mode (accelerometer + gyroscope fusion) </p>
</td></tr>
<tr><td class="fieldname"><a id="gga401ddda4c6ec7a2b0d21e257d52ec49fad4441b53cd291468803579ae85334e2e" name="gga401ddda4c6ec7a2b0d21e257d52ec49fad4441b53cd291468803579ae85334e2e"></a>OPERATION_MODE_COMPASS&#160;</td><td class="fielddoc"><p>Compass mode (accelerometer + magnetometer fusion) </p>
</td></tr>
<tr><td class="fieldname"><a id="gga401ddda4c6ec7a2b0d21e257d52ec49fa5a15b75b6a35eff39a0163042901bccb" name="gga401ddda4c6ec7a2b0d21e257d52ec49fa5a15b75b6a35eff39a0163042901bccb"></a>OPERATION_MODE_M4G&#160;</td><td class="fielddoc"><p>M4G mode (magnetometer + gyroscope fusion) </p>
</td></tr>
<tr><td class="fieldname"><a id="gga401ddda4c6ec7a2b0d21e257d52ec49fa01202040d4fe809e7764b80abd1e41e1" name="gga401ddda4c6ec7a2b0d21e257d52ec49fa01202040d4fe809e7764b80abd1e41e1"></a>OPERATION_MODE_NDOF_FMC_OFF&#160;</td><td class="fielddoc"><p>NDOF mode with fast magnetic calibration off. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga401ddda4c6ec7a2b0d21e257d52ec49fa7aff545bcd830cb1c07c238464cc205d" name="gga401ddda4c6ec7a2b0d21e257d52ec49fa7aff545bcd830cb1c07c238464cc205d"></a>OPERATION_MODE_NDOF&#160;</td><td class="fielddoc"><p>NDOF mode (full 9-DoF with sensor fusion) </p>
</td></tr>
</table>

</div>
</div>
<a id="ga5913adfbcad0f6bc6e194680ece72f6c" name="ga5913adfbcad0f6bc6e194680ece72f6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5913adfbcad0f6bc6e194680ece72f6c">&#9670;&#160;</a></span>imu_powermode_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="#ga5913adfbcad0f6bc6e194680ece72f6c">imu_powermode_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Power modes for the BNO055 sensor. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga5913adfbcad0f6bc6e194680ece72f6ca3bb4ece3a81e5d85eba87a387dbe8b26" name="gga5913adfbcad0f6bc6e194680ece72f6ca3bb4ece3a81e5d85eba87a387dbe8b26"></a>POWER_MODE_NORMAL&#160;</td><td class="fielddoc"><p>Normal operation mode (full performance) </p>
</td></tr>
<tr><td class="fieldname"><a id="gga5913adfbcad0f6bc6e194680ece72f6cad346e12cb318b3c2ca66c563b2b22aef" name="gga5913adfbcad0f6bc6e194680ece72f6cad346e12cb318b3c2ca66c563b2b22aef"></a>POWER_MODE_LOWPOWER&#160;</td><td class="fielddoc"><p>Reduced power consumption mode. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga5913adfbcad0f6bc6e194680ece72f6cac2882be2d7bef7faa64770bc172dcd0c" name="gga5913adfbcad0f6bc6e194680ece72f6cac2882be2d7bef7faa64770bc172dcd0c"></a>POWER_MODE_SUSPEND&#160;</td><td class="fielddoc"><p>Lowest power mode (sensor disabled) </p>
</td></tr>
</table>

</div>
</div>
<a id="gac23b9d3a623ab1d78f787fd7c0a27d77" name="gac23b9d3a623ab1d78f787fd7c0a27d77"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac23b9d3a623ab1d78f787fd7c0a27d77">&#9670;&#160;</a></span>imu_vector_type_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="#gac23b9d3a623ab1d78f787fd7c0a27d77">imu_vector_type_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Types of sensor data vectors that can be read. </p>
<p>Each vector type has a specific register address and conversion factor. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ggac23b9d3a623ab1d78f787fd7c0a27d77acc3b3076ab1a04df975cf7d24dd3c0bd" name="ggac23b9d3a623ab1d78f787fd7c0a27d77acc3b3076ab1a04df975cf7d24dd3c0bd"></a>VECTOR_ACCELEROMETER&#160;</td><td class="fielddoc"><p>Acceleration data (m/s²) </p>
</td></tr>
<tr><td class="fieldname"><a id="ggac23b9d3a623ab1d78f787fd7c0a27d77a60a6e0242db30c34de57e837c2c32974" name="ggac23b9d3a623ab1d78f787fd7c0a27d77a60a6e0242db30c34de57e837c2c32974"></a>VECTOR_MAGNETOMETER&#160;</td><td class="fielddoc"><p>Magnetic field data (μT) </p>
</td></tr>
<tr><td class="fieldname"><a id="ggac23b9d3a623ab1d78f787fd7c0a27d77aac75f41ecda4ac504e2110b6faa2f447" name="ggac23b9d3a623ab1d78f787fd7c0a27d77aac75f41ecda4ac504e2110b6faa2f447"></a>VECTOR_GYROSCOPE&#160;</td><td class="fielddoc"><p>Angular velocity data (dps) </p>
</td></tr>
<tr><td class="fieldname"><a id="ggac23b9d3a623ab1d78f787fd7c0a27d77a424cd2e7452cbed7576aa32b6eb449bc" name="ggac23b9d3a623ab1d78f787fd7c0a27d77a424cd2e7452cbed7576aa32b6eb449bc"></a>VECTOR_EULER&#160;</td><td class="fielddoc"><p>Euler angles (degrees) </p>
</td></tr>
<tr><td class="fieldname"><a id="ggac23b9d3a623ab1d78f787fd7c0a27d77a7c1b53745eb8705d4073684a5053baf0" name="ggac23b9d3a623ab1d78f787fd7c0a27d77a7c1b53745eb8705d4073684a5053baf0"></a>VECTOR_LINEARACCEL&#160;</td><td class="fielddoc"><p>Linear acceleration (without gravity) (m/s²) </p>
</td></tr>
<tr><td class="fieldname"><a id="ggac23b9d3a623ab1d78f787fd7c0a27d77a70807bf085cec93ea6e563c5a3dd6185" name="ggac23b9d3a623ab1d78f787fd7c0a27d77a70807bf085cec93ea6e563c5a3dd6185"></a>VECTOR_GRAVITY&#160;</td><td class="fielddoc"><p>Gravity vector (m/s²) </p>
</td></tr>
</table>

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="ga358e7a3778991d16b3b33dfe923cbffe" name="ga358e7a3778991d16b3b33dfe923cbffe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga358e7a3778991d16b3b33dfe923cbffe">&#9670;&#160;</a></span>IMU_Eulers_Apply_Offset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IMU_Eulers_Apply_Offset </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structimu__vector__t.html">imu_vector_t</a> *</td>          <td class="paramname"><span class="paramname"><em>angles</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Apply mounting offset corrections to Euler angles. </p>
<p>Adjusts angle readings based on experimentally determined mounting offsets.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">angles</td><td>Pointer to angle vector to correct </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga48cf47ac01e614d873d34d0f2845d590" name="ga48cf47ac01e614d873d34d0f2845d590"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga48cf47ac01e614d873d34d0f2845d590">&#9670;&#160;</a></span>IMU_GetVector()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IMU_GetVector </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#gac23b9d3a623ab1d78f787fd7c0a27d77">imu_vector_type_t</a></td>          <td class="paramname"><span class="paramname"><em>vector_type</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *</td>          <td class="paramname"><span class="paramname"><em>xyz</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read a specific vector type from the IMU. </p>
<p>Retrieves and converts raw sensor data to physical units:</p><ul>
<li>Accelerometer: m/s² (100 LSB = 1 m/s²)</li>
<li>Gyroscope: degrees/second (16 LSB = 1 dps)</li>
<li>Magnetometer: microtesla (16 LSB = 1 μT)</li>
<li>Euler angles: degrees (16 LSB = 1 degree)</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">vector_type</td><td>Type of vector to read </td></tr>
    <tr><td class="paramname">xyz</td><td>Array to store the X, Y, Z values (3 elements) </td></tr>
  </table>
  </dd>
</dl>
<p>Convert the value to an appropriate range (section 3.6.4) and assign the value to the Vector type</p>

</div>
</div>
<a id="gaed262c2be35b7096c228cdf1cec7240f" name="gaed262c2be35b7096c228cdf1cec7240f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaed262c2be35b7096c228cdf1cec7240f">&#9670;&#160;</a></span>IMU_Init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IMU_Init </td>
          <td>(</td>
          <td class="paramtype">I2C_HandleTypeDef *</td>          <td class="paramname"><span class="paramname"><em>hi2c</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#ga401ddda4c6ec7a2b0d21e257d52ec49f">imu_opmode_t</a></td>          <td class="paramname"><span class="paramname"><em>mode</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structimu__axis__map__t.html">imu_axis_map_t</a></td>          <td class="paramname"><span class="paramname"><em>map</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the IMU sensor with specified configuration. </p>
<p>Performs complete initialization sequence:</p><ul>
<li>Hardware reset</li>
<li>Device ID verification</li>
<li>Power mode configuration</li>
<li>Axis remapping</li>
<li>Operation mode setup</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hi2c</td><td>I2C handle for communication </td></tr>
    <tr><td class="paramname">mode</td><td>Desired operation mode (typically OPERATION_MODE_NDOF) </td></tr>
    <tr><td class="paramname">map</td><td>Axis mapping configuration for physical orientation </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga76c1a55d6cc2203613cd082d2edf540a" name="ga76c1a55d6cc2203613cd082d2edf540a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga76c1a55d6cc2203613cd082d2edf540a">&#9670;&#160;</a></span>IMU_SelectRegPage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IMU_SelectRegPage </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>page</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Select register page (0 or 1) </p>
<p>The BNO055 uses a paged register map. Most configuration requires accessing registers on page 1.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">page</td><td>Register page (0 or 1) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga28f8d16c01d53b0521fcfd6c5138bedd" name="ga28f8d16c01d53b0521fcfd6c5138bedd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga28f8d16c01d53b0521fcfd6c5138bedd">&#9670;&#160;</a></span>IMU_SetAxisMap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IMU_SetAxisMap </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structimu__axis__map__t.html">imu_axis_map_t</a></td>          <td class="paramname"><span class="paramname"><em>axis</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configure the axis mapping. </p>
<p>Sets both the physical axis remapping and sign configuration to adapt the sensor to its physical mounting orientation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">axis</td><td>Axis mapping configuration </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga4f8a4ea1671cd748f22e8df02e9a9a39" name="ga4f8a4ea1671cd748f22e8df02e9a9a39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4f8a4ea1671cd748f22e8df02e9a9a39">&#9670;&#160;</a></span>IMU_SetMode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IMU_SetMode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="#ga401ddda4c6ec7a2b0d21e257d52ec49f">imu_opmode_t</a></td>          <td class="paramname"><span class="paramname"><em>mode</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Change the IMU's operation mode. </p>
<p>Switches between different sensor fusion modes. Requires transitioning through CONFIG mode first. Includes necessary delays for mode changes.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mode</td><td>Target operation mode </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gae31756275a63934a8b239f19c9ffae4a" name="gae31756275a63934a8b239f19c9ffae4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae31756275a63934a8b239f19c9ffae4a">&#9670;&#160;</a></span>IMU_Task()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IMU_Task </td>
          <td>(</td>
          <td class="paramtype">void *</td>          <td class="paramname"><span class="paramname"><em>pvParameters</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main task for IMU data processing and transmission. </p>
<p>Periodically reads sensor data, applies corrections, and transmits via CAN when significant changes are detected.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pvParameters</td><td>Unused task parameter (required by FreeRTOS) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga227f9cb3012bb87083480348fe0f2b12" name="ga227f9cb3012bb87083480348fe0f2b12"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga227f9cb3012bb87083480348fe0f2b12">&#9670;&#160;</a></span>IMU_Transform_Accels()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IMU_Transform_Accels </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structimu__vector__t.html">imu_vector_t</a> *</td>          <td class="paramname"><span class="paramname"><em>accels</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Transform acceleration vectors based on mounting orientation. </p>
<p>Applies a rotation matrix to acceleration data to account for non-ideal sensor mounting angles. Ensures acceleration data aligns with vehicle axes.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">accels</td><td>Pointer to acceleration vector to transform </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gaad391dee2d813713a54b53f9564fcc35" name="gaad391dee2d813713a54b53f9564fcc35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaad391dee2d813713a54b53f9564fcc35">&#9670;&#160;</a></span>IMU_WriteData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IMU_WriteData </td>
          <td>(</td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>reg</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>data</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write a single byte to an IMU register. </p>
<p>Low-level register access for configuration.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">reg</td><td>Register address </td></tr>
    <tr><td class="paramname">data</td><td>Value to write </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- HTML footer for doxygen 1.9.4-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
<script>
mermaid.initialize({
  startOnLoad: true,
  theme: 'dark'
});
</script>
</body>
</html>
